# JAVA

[üé• Regarder la vid√©o sur YouTube](https://www.youtube.com/watch?v=dQw4w9WgXcQ)

# Maven en Java

![Maven](maven.jpg)

Maven est un **outil de build** (construction de projet) qui simplifie la gestion et l‚Äôautomatisation du d√©veloppement en Java.
Maven permet de **g√©rer les d√©pendances, structurer ton projet et automatiser ton cycle de d√©veloppement** en Java.

---

## üîπ Ce que fait Maven

1. **Gestion des d√©pendances**

   - D√©clare les biblioth√®ques n√©cessaires dans un fichier unique (`pom.xml`).
   - T√©l√©charge automatiquement les JAR depuis Maven Central.

2. **Standardisation du projet**

   - Structure commune et claire :
     ```
     mon-projet/
       ‚îú‚îÄ src/
       ‚îÇ   ‚îú‚îÄ main/java       (code Java)
       ‚îÇ   ‚îú‚îÄ main/resources  (fichiers de config)
       ‚îÇ   ‚îî‚îÄ test/java       (tests unitaires)
       ‚îî‚îÄ pom.xml             (fichier de configuration Maven)
     ```

3. **Automatisation des t√¢ches**

   - Compilation : `mvn compile`
   - Tests : `mvn test`
   - Cr√©ation du JAR/WAR : `mvn package`
   - Nettoyage : `mvn clean`
   - D√©ploiement local : `mvn install`

4. **Extensibilit√©**
   - Plugins disponibles pour tests, documentation, qualit√© de code, etc.

---

## üîπ Comment s‚Äôy prendre (premiers pas)

### 1. Installer Maven

- T√©l√©charger [Apache Maven](https://maven.apache.org/download.cgi).
- Configurer la variable d‚Äôenvironnement `MAVEN_HOME` et ajouter `bin` dans ton `PATH`.
- V√©rifier l‚Äôinstallation :
  ```bash
  mvn -v
  ```

### 2. Cr√©er un projet Maven

```bash
mvn archetype:generate   -DgroupId=com.example   -DartifactId=mon-projet   -DarchetypeArtifactId=maven-archetype-quickstart   -DinteractiveMode=false
```

### 3. Exemple de `pom.xml`

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example</groupId>
  <artifactId>mon-projet</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <dependencies>
    <!-- D√©pendance JUnit pour les tests -->
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.13.2</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

</project>
```

---

## üîπ Exemple concret

### Classe Java

Fichier : `src/main/java/com/example/App.java`

```java
package com.example;

public class App {
    public String sayHello() {
        return "Hello, Maven!";
    }

    public static void main(String[] args) {
        App app = new App();
        System.out.println(app.sayHello());
    }
}
```

### Test JUnit

Fichier : `src/test/java/com/example/AppTest.java`

```java
package com.example;

import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class AppTest {
    @Test
    public void testSayHello() {
        App app = new App();
        assertEquals("Hello, Maven!", app.sayHello());
    }
}
```

---

## üîπ Lancer des commandes Maven

- Compiler :
  ```bash
  mvn compile
  ```
- Ex√©cuter les tests :
  ```bash
  mvn test
  ```
- Cr√©er un JAR :
  ```bash
  mvn package
  ```
- Nettoyer le projet :
  ```bash
  mvn clean
  ```

---

# Manuel Maven : D√©pendances & Plugin Maven Helper

## 1. Installation de d√©pendances Maven

### √âtape 1 : Ajouter une d√©pendance

Dans ton `pom.xml`, ajoute tes d√©pendances dans la section `<dependencies> ... </dependencies>`.

Exemple avec **JUnit** (tests unitaires) :

```xml
<dependencies>
    <dependency>
        <groupId>org.junit.jupiter</groupId>
        <artifactId>junit-jupiter</artifactId>
        <version>5.10.2</version>
        <scope>test</scope>
    </dependency>
</dependencies>
```

### √âtape 2 : T√©l√©charger les d√©pendances

En ligne de commande :

```bash
mvn clean install
```

Dans **IntelliJ** ‚Üí clic droit sur le projet ‚Üí `Maven` ‚Üí `Reload Project`.

üëâ Maven t√©l√©charge automatiquement la librairie depuis le **Maven Central Repository**.

### √âtape 3 : V√©rifier l‚Äôinstallation

- En CLI : les libs se trouvent dans `~/.m2/repository/`
- Dans IntelliJ : onglet **Maven** (√† droite) ‚Üí `Dependencies`.

---

## 2. Installation du plugin Maven Helper (IntelliJ IDEA)

Le plugin **Maven Helper** est utile pour :

- Visualiser l‚Äôarbre des d√©pendances
- D√©tecter les conflits de versions
- Exclure une d√©pendance en double

### √âtape 1 : Installer Maven Helper

1. Ouvre **IntelliJ IDEA**
2. Menu `File` ‚Üí `Settings` ‚Üí `Plugins`
3. Onglet **Marketplace**
4. Recherche **Maven Helper**
5. Clique **Install** et red√©marre IntelliJ

### √âtape 2 : Utiliser Maven Helper

1. Ouvre ton `pom.xml`
2. Un onglet **Dependency Analyzer** appara√Æt en bas
3. Tu pourras :
   - Voir l‚Äôarbre des d√©pendances
   - Identifier des conflits
   - Exclure des d√©pendances

---

## Exemple pratique : exclure une d√©pendance

Si deux versions d‚Äôune librairie rentrent en conflit :

```xml
<dependency>
    <groupId>org.example</groupId>
    <artifactId>ma-lib</artifactId>
    <version>1.2.3</version>
    <exclusions>
        <exclusion>
            <groupId>org.example</groupId>
            <artifactId>ancienne-lib</artifactId>
        </exclusion>
    </exclusions>
</dependency>
```

---

# Tests in JAVA avec JUnit5

## @BeforeAll

- Ex√©cut√© **une seule fois avant tous les tests** de la classe.
- Utilis√© pour initialiser des ressources lourdes (connexion √† une base de donn√©es, serveur de test, etc.).
- Doit √™tre **static**, sauf si on utilise `@TestInstance(Lifecycle.PER_CLASS)`.

## @BeforeEach

- Ex√©cut√© **avant chaque test individuel**.
- Sert √† r√©initialiser l‚Äô√©tat (objets, variables, configuration).

---

## Exemple

```java
import org.junit.jupiter.api.*;

public class ExempleTest {

    @BeforeAll
    static void initAll() {
        System.out.println("Avant TOUS les tests (1 seule fois)");
    }

    @BeforeEach
    void init() {
        System.out.println("Avant CHAQUE test");
    }

    @Test
    void test1() {
        System.out.println("Test 1");
    }

    @Test
    void test2() {
        System.out.println("Test 2");
    }

    @AfterEach
    void tearDown() {
        System.out.println("Apr√®s CHAQUE test");
    }

    @AfterAll
    static void tearDownAll() {
        System.out.println("Apr√®s TOUS les tests (1 seule fois)");
    }
}
```

### Sortie possible :

```
Avant TOUS les tests (1 seule fois)
Avant CHAQUE test
Test 1
Apr√®s CHAQUE test
Avant CHAQUE test
Test 2
Apr√®s CHAQUE test
Apr√®s TOUS les tests (1 seule fois)
```

---

## R√©sum√©

- `@BeforeAll` = une seule fois, au d√©but.
- `@BeforeEach` = avant chaque m√©thode de test.
